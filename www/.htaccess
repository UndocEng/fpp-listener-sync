# Captive portal redirect - only redirect captive portal detection URLs
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Redirect listen.local root to /listen/ (for easy access)
    RewriteCond %{HTTP_HOST} ^listen\.local$ [NC]
    RewriteCond %{REQUEST_URI} ^/$
    RewriteRule ^$ /listen/ [R=302,L]

    # Redirect common captive portal detection URLs to /listen/
    RewriteCond %{REQUEST_URI} ^/(generate_204|gen_204|hotspot-detect\.html|success\.txt|connecttest\.txt|canonical\.html)$ [NC]
    RewriteRule .* /listen/ [R=302,L]
</IfModule>
